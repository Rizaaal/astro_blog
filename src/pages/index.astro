---
import Base from "../layouts/Base.astro";
import Preview from "../components/Preview.astro";
import formatDate from "../utils/scripts/date.js";
import MainSection from "../layouts/MainSection.astro";

const posts = await Astro.glob("../articles/*.md");
posts.sort((a, b) => new Date(b.frontmatter.pubDate).getTime() - new Date(a.frontmatter.pubDate).getTime());
---

<Base>
  <MainSection title={"Home"}>
    {
      posts.map((post) => (
        <Preview
          title={post.frontmatter.title}
          date={formatDate.USADate(new Date(post.frontmatter.pubDate))}
          tags={post.frontmatter.tags}
          image={post.frontmatter.image ? post.frontmatter.image.url : null}
          description={post.frontmatter.description}
        />
      ))
    }
  </MainSection>
</Base>
